{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\juanpapiro\\\\Documents\\\\wspaceweb\\\\mapa-da-reciclagem\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"C:\\\\Users\\\\juanpapiro\\\\Documents\\\\wspaceweb\\\\mapa-da-reciclagem\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\juanpapiro\\\\Documents\\\\wspaceweb\\\\mapa-da-reciclagem\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\juanpapiro\\\\Documents\\\\wspaceweb\\\\mapa-da-reciclagem\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\juanpapiro\\\\Documents\\\\wspaceweb\\\\mapa-da-reciclagem\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\juanpapiro\\\\Documents\\\\wspaceweb\\\\mapa-da-reciclagem\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\juanpapiro\\\\Documents\\\\wspaceweb\\\\mapa-da-reciclagem\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\juanpapiro\\\\Documents\\\\wspaceweb\\\\mapa-da-reciclagem\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\juanpapiro\\\\Documents\\\\wspaceweb\\\\mapa-da-reciclagem\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\juanpapiro\\\\Documents\\\\wspaceweb\\\\mapa-da-reciclagem\\\\src\\\\pages\\\\ProductEdit\\\\index.js\";\nimport React, { Component } from 'react';\nimport '../../style.css';\nimport './productEdit.css';\nimport { axiosService } from '../../service/axios';\nimport MessageLine from '../../components/MessageLine';\nimport Popup from '../../components/Popup';\nimport { moneyMask } from '../../utils/masks';\n\nvar ProductEdit = /*#__PURE__*/function (_Component) {\n  _inherits(ProductEdit, _Component);\n\n  function ProductEdit(props) {\n    var _this;\n\n    _classCallCheck(this, ProductEdit);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ProductEdit).call(this));\n    _this.state = {\n      id: '',\n      products: [],\n      productInsert: '',\n      valueInsert: '',\n      mktProducts: [],\n      stationNotFound: '',\n      load: '',\n      message: '',\n      typeMessage: '',\n      showMessage: false,\n      edit: false,\n      line: '',\n      newValue: '',\n      oldValue: '',\n      idMktProduct: '',\n      token: '',\n      showPopup: false\n    };\n    _this.loadProducts = _this.loadProducts.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.loadMktProducts = _this.loadMktProducts.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.insertProduct = _this.insertProduct.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.delete = _this.delete.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.edit = _this.edit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.setNewValue = _this.setNewValue.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.confirmUpdate = _this.confirmUpdate.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.rejectUpdate = _this.rejectUpdate.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.requestDeleteProduct = _this.requestDeleteProduct.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.formatValueIn = _this.formatValueIn.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.message = _this.message.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.updateStateMessage = _this.updateStateMessage.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(ProductEdit, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var id = this.props.match.params.id;\n      this.setState({\n        id: id\n      });\n      this.setState({\n        token: localStorage.getItem('token')\n      });\n      this.loadMktProducts(id);\n      this.loadProducts();\n    }\n  }, {\n    key: \"loadProducts\",\n    value: function () {\n      var _loadProducts = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axiosService({\n                  method: 'GET',\n                  url: 'product/find',\n                  params: {\n                    page: 0,\n                    size: 0\n                  }\n                }).then(function (response) {\n                  _this2.setState({\n                    products: response.data.response\n                  });\n                }).catch(function (error) {});\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function loadProducts() {\n        return _loadProducts.apply(this, arguments);\n      }\n\n      return loadProducts;\n    }()\n  }, {\n    key: \"loadMktProducts\",\n    value: function () {\n      var _loadMktProducts = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id) {\n        var _this3 = this;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return axiosService({\n                  method: 'GET',\n                  url: '/marketProduct/find',\n                  params: {\n                    stationId: id,\n                    page: 0,\n                    size: 0,\n                    sort: 'DATEUPDATE'\n                  }\n                }).then(function (response) {\n                  console.log(response.data.response);\n\n                  _this3.setState({\n                    mktProducts: response.data.response\n                  });\n\n                  _this3.setState({\n                    load: true\n                  });\n                }).catch(function (error) {\n                  _this3.setState({\n                    load: false\n                  });\n\n                  _this3.setState({\n                    message: 'falha ao resgatar produtos.',\n                    typeMessage: 'error'\n                  });\n                });\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function loadMktProducts(_x) {\n        return _loadMktProducts.apply(this, arguments);\n      }\n\n      return loadMktProducts;\n    }()\n  }, {\n    key: \"insertProduct\",\n    value: function () {\n      var _insertProduct = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e) {\n        var _this4 = this;\n\n        var value;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                e.preventDefault();\n                debugger;\n                value = this.state.valueInsert.replace(',', '.');\n                _context3.next = 5;\n                return axiosService({\n                  method: 'POST',\n                  url: '/marketProduct/insert',\n                  data: {\n                    idProduct: this.state.productInsert,\n                    value: value,\n                    idStations: this.state.id\n                  },\n                  headers: {\n                    authorization: this.state.token\n                  }\n                }).then(function (response) {\n                  var products = [response.data.response].concat(_toConsumableArray(_this4.state.mktProducts));\n\n                  _this4.setState({\n                    mktProducts: products,\n                    showMessage: true,\n                    typeMessage: 'ok',\n                    message: 'Produto inserido com sucesso!'\n                  });\n\n                  _this4.updateStateMessage();\n                }).catch(function (error) {\n                  _this4.setState({\n                    showMessage: true,\n                    typeMessage: 'error',\n                    message: 'Falha ao inserir produto!'\n                  });\n\n                  _this4.updateStateMessage();\n                });\n\n              case 5:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function insertProduct(_x2) {\n        return _insertProduct.apply(this, arguments);\n      }\n\n      return insertProduct;\n    }()\n  }, {\n    key: \"requestDeleteProduct\",\n    value: function requestDeleteProduct(idMktProduct, e) {\n      this.setState({\n        showPopup: !this.state.showPopup\n      });\n\n      if (idMktProduct !== null) {\n        this.setState({\n          idMktProduct: idMktProduct\n        });\n      }\n\n      if (e !== null) {\n        if (e.currentTarget.name === 'sim') {\n          console.log(this.state.mktProducts);\n          this.delete(this.state.idMktProduct);\n        }\n      }\n    }\n  }, {\n    key: \"delete\",\n    value: function () {\n      var _delete2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(idMktProduct) {\n        var _this5 = this;\n\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                console.log(idMktProduct);\n                _context4.next = 3;\n                return axiosService({\n                  method: 'DELETE',\n                  url: '/marketProduct/delete',\n                  params: {\n                    idMktProduct: idMktProduct\n                  },\n                  headers: {\n                    authorization: this.state.token\n                  }\n                }).then(function (response) {\n                  console.log(response.data.response);\n\n                  _this5.setState({\n                    load: true\n                  });\n\n                  var products = [];\n\n                  _this5.state.mktProducts.forEach(function (p) {\n                    if (p.idMktProduct !== _this5.state.idMktProduct) {\n                      products.push(p);\n                    }\n                  });\n\n                  _this5.setState({\n                    mktProducts: products,\n                    showMessage: true,\n                    typeMessage: 'ok',\n                    message: 'Produto excluído com sucesso!'\n                  });\n\n                  _this5.updateStateMessage();\n                }).catch(function (error) {\n                  // this.setState({load: false});\n                  _this5.setState({\n                    showMessage: true,\n                    typeMessage: 'error',\n                    message: 'Falha ao excluir produto!'\n                  });\n\n                  _this5.updateStateMessage();\n                });\n\n              case 3:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function _delete(_x3) {\n        return _delete2.apply(this, arguments);\n      }\n\n      return _delete;\n    }()\n  }, {\n    key: \"edit\",\n    value: function edit(idMktProduct, line) {\n      this.setState({\n        edit: true\n      });\n      this.setState({\n        line: line\n      });\n      this.setState({\n        idMktProduct: idMktProduct\n      });\n    }\n  }, {\n    key: \"setNewValue\",\n    value: function setNewValue(e) {\n      this.setState({\n        newValue: moneyMask(e.target.value)\n      });\n      e.preventDefault();\n    }\n  }, {\n    key: \"confirmUpdate\",\n    value: function () {\n      var _confirmUpdate = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        var _this6 = this;\n\n        var value, products;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                debugger;\n                value = this.state.newValue.replace(',', '.');\n                debugger;\n                _context5.next = 5;\n                return axiosService({\n                  method: 'PUT',\n                  url: '/marketProduct/update',\n                  params: {\n                    idMktProduct: this.state.idMktProduct,\n                    value: value\n                  },\n                  headers: {\n                    authorization: this.state.token\n                  }\n                }).then(function (response) {\n                  _this6.setState({\n                    load: true\n                  });\n\n                  _this6.setState({\n                    edit: false\n                  });\n\n                  _this6.setState({\n                    showMessage: true,\n                    typeMessage: 'ok',\n                    message: 'Produto excluído com sucesso!'\n                  });\n\n                  _this6.updateStateMessage();\n                }).catch(function (error) {\n                  _this6.setState({\n                    load: false\n                  });\n\n                  _this6.setState({\n                    message: 'falha ao alterar produto.',\n                    typeMessage: 'error'\n                  });\n                });\n\n              case 5:\n                debugger;\n                products = this.state.mktProducts;\n                products.forEach(function (p) {\n                  if (p.idMktProduct === _this6.state.idMktProduct) {\n                    p.value = value;\n                  }\n                });\n                this.setState({\n                  mktProducts: products,\n                  newValue: ''\n                });\n\n              case 9:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function confirmUpdate() {\n        return _confirmUpdate.apply(this, arguments);\n      }\n\n      return confirmUpdate;\n    }()\n  }, {\n    key: \"rejectUpdate\",\n    value: function rejectUpdate() {\n      this.setState({\n        newValue: '',\n        edit: false\n      });\n    }\n  }, {\n    key: \"formatValueIn\",\n    value: function formatValueIn(e) {\n      moneyMask(e.target.value);\n      this.setState({\n        valueInsert: moneyMask(e.target.value)\n      });\n    }\n  }, {\n    key: \"message\",\n    value: function message() {\n      return /*#__PURE__*/React.createElement(MessageLine, {\n        message: this.state.message,\n        typeMessage: this.state.typeMessage,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 13\n        }\n      });\n    }\n  }, {\n    key: \"updateStateMessage\",\n    value: function updateStateMessage() {\n      var _this7 = this;\n\n      var interval = setInterval(function () {\n        _this7.setState({\n          showMessage: false\n        });\n      }, 3000);\n      return function () {\n        return clearInterval(interval);\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this8 = this;\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        id: \"containerPage\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"containerBtnGoBackSeparate\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 18\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"btnGoBack\",\n        onClick: function onClick() {\n          return _this8.props.history.push('/admin');\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 21\n        }\n      }, \"voltar\")), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"titlePage\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 17\n        }\n      }, \"Adicionar produtos\"), this.state.showPopup ? /*#__PURE__*/React.createElement(Popup, {\n        txt: \"Deseja excluir o produto?\",\n        btn1: \"sim\",\n        btn2: \"n\\xE3o\",\n        close: function close(e) {\n          return _this8.requestDeleteProduct(null, e);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 41\n        }\n      }) : null, /*#__PURE__*/React.createElement(\"form\", {\n        id: \"containerInsertProduct\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"containerInternInsertProduct\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"containerSelectProduct\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        id: \"labelsOthers\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 33\n        }\n      }, \"Produto:\"), /*#__PURE__*/React.createElement(\"select\", {\n        id: \"selectOthers\",\n        name: \"productInsert\",\n        value: this.state.productInsert,\n        onChange: function onChange(e) {\n          _this8.setState({\n            productInsert: e.target.value\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        id: \"selectFindOpt\",\n        key: 0,\n        value: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 37\n        }\n      }, \"Selecione...\"), this.state.products.map(function (p) {\n        return /*#__PURE__*/React.createElement(\"option\", {\n          id: \"selectFindOpt\",\n          key: p.id,\n          value: p.id,\n          __self: _this8,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 48\n          }\n        }, p.product);\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"containerInputProduct\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        id: \"labelsOthers\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 33\n        }\n      }, \"Valor:\"), /*#__PURE__*/React.createElement(\"input\", {\n        id: \"inputOthers\",\n        type: \"text\",\n        name: \"value\",\n        value: this.state.valueInsert,\n        placeholder: \"0,00\",\n        onChange: function onChange(e) {\n          _this8.formatValueIn(e);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 33\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"containerBtnProduct\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        id: \"btnOthers\",\n        onClick: function onClick(e) {\n          return _this8.insertProduct(e);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 33\n        }\n      }, \"Inserir\")))), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"titlePage\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 17\n        }\n      }, \"Atualizar ou excluir produtos\"), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"containerResultFind\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 17\n        }\n      }, this.state.showMessage !== false && this.message(), this.state.load === false ? /*#__PURE__*/React.createElement(MessageLine, {\n        message: this.state.message,\n        typeMessage: this.state.typeMessage,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 25\n        }\n      }) : /*#__PURE__*/React.createElement(\"table\", {\n        id: \"tbFind\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        id: \"tbFindTh\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 37\n        }\n      }, \"Produto\"), /*#__PURE__*/React.createElement(\"th\", {\n        id: \"tbFindTh\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 37\n        }\n      }, \"Valor (R$) /Kg\"), /*#__PURE__*/React.createElement(\"th\", {\n        id: \"tbFindTh\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 37\n        }\n      }, \"\\xDAltima atualiza\\xE7\\xE3o\"), /*#__PURE__*/React.createElement(\"th\", {\n        id: \"tbFindTh\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 37\n        }\n      }, \"A\\xE7\\xE3o\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 29\n        }\n      }, this.state.mktProducts.map(function (p, index) {\n        return /*#__PURE__*/React.createElement(\"tr\", {\n          id: \"tbFindTrNoHover\",\n          style: {\n            'backgroundColor': index % 2 === 0 ? '#F3F6F6' : '#FFF'\n          },\n          key: p.idMktProduct,\n          __self: _this8,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(\"td\", {\n          id: \"tbFindTd\",\n          __self: _this8,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 37\n          }\n        }, p.product), _this8.state.edit === true && _this8.state.showPopup !== true && _this8.state.line === index ? /*#__PURE__*/React.createElement(\"td\", {\n          id: \"tbFindTdNotPadding\",\n          __self: _this8,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 41\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          id: \"inputValueContainer\",\n          __self: _this8,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 45\n          }\n        }, /*#__PURE__*/React.createElement(\"input\", {\n          id: \"inputValueTxt\",\n          type: \"text\",\n          name: \"value\",\n          value: _this8.state.newValue,\n          placeholder: \"0,00\",\n          onChange: function onChange(e) {\n            _this8.setNewValue(e);\n          },\n          __self: _this8,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 49\n          }\n        }), /*#__PURE__*/React.createElement(\"img\", {\n          id: \"tbIconEditValue\",\n          src: require('../../assets/incons/icon-confirm-fill.svg'),\n          onClick: function onClick() {\n            _this8.confirmUpdate(p.idMktProduct);\n          },\n          alt: \"excluir\",\n          __self: _this8,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 49\n          }\n        }), /*#__PURE__*/React.createElement(\"img\", {\n          id: \"tbIconEditValue\",\n          src: require('../../assets/incons/icon-delete-fill.svg'),\n          onClick: function onClick() {\n            _this8.rejectUpdate(p.idMktProduct);\n          },\n          alt: \"excluir\",\n          __self: _this8,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 49\n          }\n        }))) : /*#__PURE__*/React.createElement(\"td\", {\n          id: \"tbFindTd\",\n          __self: _this8,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 41\n          }\n        }, p.value.toFixed(2).replace('.', ',')), /*#__PURE__*/React.createElement(\"td\", {\n          id: \"tbFindTd\",\n          __self: _this8,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 37\n          }\n        }, p.updateDate), /*#__PURE__*/React.createElement(\"td\", {\n          id: \"tbFindTdBtns\",\n          __self: _this8,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 37\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          id: \"tbIconDuo\",\n          src: require('../../assets/incons/icon-delete.svg') //  onClick={()=>{this.delete(p.idMktProduct)}} alt='excluir'/>\n          ,\n          onClick: function onClick() {\n            return _this8.requestDeleteProduct(p.idMktProduct, null);\n          },\n          alt: \"excluir\",\n          __self: _this8,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 41\n          }\n        }), /*#__PURE__*/React.createElement(\"img\", {\n          id: \"tbIconDuo\",\n          src: require('../../assets/incons/icon-edit.svg'),\n          onClick: function onClick() {\n            _this8.edit(p.idMktProduct, index);\n          },\n          alt: \"editar\",\n          __self: _this8,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 41\n          }\n        })));\n      })))));\n    }\n  }]);\n\n  return ProductEdit;\n}(Component);\n\nexport default ProductEdit;","map":{"version":3,"sources":["C:/Users/juanpapiro/Documents/wspaceweb/mapa-da-reciclagem/src/pages/ProductEdit/index.js"],"names":["React","Component","axiosService","MessageLine","Popup","moneyMask","ProductEdit","props","state","id","products","productInsert","valueInsert","mktProducts","stationNotFound","load","message","typeMessage","showMessage","edit","line","newValue","oldValue","idMktProduct","token","showPopup","loadProducts","bind","loadMktProducts","insertProduct","delete","setNewValue","confirmUpdate","rejectUpdate","requestDeleteProduct","formatValueIn","updateStateMessage","match","params","setState","localStorage","getItem","method","url","page","size","then","response","data","catch","error","stationId","sort","console","log","e","preventDefault","value","replace","idProduct","idStations","headers","authorization","currentTarget","name","forEach","p","push","target","interval","setInterval","clearInterval","history","map","product","index","require","toFixed","updateDate"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\n\r\nimport '../../style.css';\r\nimport './productEdit.css'\r\nimport { axiosService } from '../../service/axios';\r\nimport MessageLine from '../../components/MessageLine';\r\nimport Popup from '../../components/Popup';\r\nimport { moneyMask } from '../../utils/masks';\r\n\r\nclass ProductEdit extends Component {\r\n    constructor(props) {\r\n        super();\r\n        this.state = {\r\n            id:'',\r\n            products:[],\r\n            productInsert: '',\r\n            valueInsert: '',\r\n            mktProducts:[],\r\n            stationNotFound:'',\r\n            load:'',\r\n            message:'',\r\n            typeMessage:'',\r\n            showMessage: false,\r\n            edit: false,\r\n            line: '',\r\n            newValue: '',\r\n            oldValue:'',\r\n            idMktProduct:'',\r\n            token: '',\r\n            showPopup: false,\r\n        }\r\n\r\n        this.loadProducts = this.loadProducts.bind(this);\r\n        this.loadMktProducts = this.loadMktProducts.bind(this);\r\n        this.insertProduct = this.insertProduct.bind(this);\r\n        this.delete = this.delete.bind(this);\r\n        this.edit = this.edit.bind(this);\r\n        this.setNewValue = this.setNewValue.bind(this);\r\n        this.confirmUpdate = this.confirmUpdate.bind(this);\r\n        this.rejectUpdate = this.rejectUpdate.bind(this);\r\n        this.requestDeleteProduct = this.requestDeleteProduct.bind(this);\r\n        this.formatValueIn = this.formatValueIn.bind(this);\r\n        this.message = this.message.bind(this);\r\n        this.updateStateMessage = this.updateStateMessage.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { id } = this.props.match.params;\r\n        this.setState({id: id});\r\n        this.setState({token: localStorage.getItem('token')});\r\n        this.loadMktProducts(id);\r\n        this.loadProducts();\r\n    }\r\n\r\n    async loadProducts() {\r\n        await axiosService({\r\n            method: 'GET', url: 'product/find',\r\n            params: {page: 0, size: 0}\r\n        }).then((response) => {\r\n            this.setState({products: response.data.response})\r\n        }).catch((error) => {\r\n        })\r\n    }\r\n\r\n    async loadMktProducts(id) {\r\n        await axiosService({\r\n            method: 'GET', url:'/marketProduct/find',\r\n            params:{stationId: id, page:0, size:0, sort:'DATEUPDATE'}\r\n        }).then((response) => {\r\n            console.log(response.data.response)\r\n            this.setState({mktProducts: response.data.response});\r\n            this.setState({load: true});\r\n        }).catch((error) => {\r\n            this.setState({load: false});\r\n            this.setState({message: 'falha ao resgatar produtos.',\r\n            typeMessage: 'error'})\r\n        })\r\n    }\r\n\r\n    async insertProduct(e) {\r\n        e.preventDefault();\r\n        debugger;\r\n        let value = this.state.valueInsert.replace(',','.')\r\n        await axiosService({\r\n            method: 'POST', url:'/marketProduct/insert',\r\n            data: {\r\n                idProduct: this.state.productInsert,\r\n                value: value,\r\n                idStations: this.state.id\r\n            },\r\n            headers: {authorization: this.state.token}\r\n        }).then((response) => {\r\n            let products = [response.data.response, ...this.state.mktProducts];\r\n            this.setState({mktProducts: products, showMessage: true,\r\n                           typeMessage: 'ok', message:'Produto inserido com sucesso!'})\r\n            this.updateStateMessage();\r\n        }).catch((error) => {\r\n            this.setState({showMessage: true, typeMessage: 'error',\r\n                message:'Falha ao inserir produto!'})\r\n            this.updateStateMessage();\r\n        })\r\n    }\r\n\r\n    requestDeleteProduct(idMktProduct, e) {\r\n        this.setState({showPopup:!this.state.showPopup});\r\n        if(idMktProduct !== null) {\r\n            this.setState({idMktProduct: idMktProduct});\r\n        }\r\n        if(e !== null) {\r\n            if(e.currentTarget.name === 'sim') {\r\n                console.log(this.state.mktProducts);\r\n                this.delete(this.state.idMktProduct);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    async delete(idMktProduct) {\r\n        console.log(idMktProduct)\r\n        await axiosService({\r\n            method: 'DELETE', url:'/marketProduct/delete',\r\n            params:{idMktProduct: idMktProduct},\r\n            headers:{authorization: this.state.token}\r\n        }).then((response) => {\r\n            console.log(response.data.response)\r\n            this.setState({load: true});\r\n            let products = [];\r\n            this.state.mktProducts.forEach((p) => {\r\n                if(p.idMktProduct !== this.state.idMktProduct) {\r\n                    products.push(p)\r\n                }\r\n            })\r\n            this.setState({mktProducts: products, showMessage: true,\r\n                typeMessage: 'ok', message:'Produto excluído com sucesso!'})\r\n            this.updateStateMessage();\r\n        }).catch((error) => {\r\n            // this.setState({load: false});\r\n            this.setState({showMessage: true, typeMessage: 'error',\r\n                message:'Falha ao excluir produto!'})\r\n            this.updateStateMessage();\r\n        })\r\n         \r\n    }\r\n\r\n    edit(idMktProduct, line){\r\n        this.setState({edit:true})\r\n        this.setState({line:line})\r\n        this.setState({idMktProduct: idMktProduct})\r\n    }\r\n\r\n    setNewValue(e) {\r\n        this.setState({newValue:moneyMask(e.target.value)})\r\n        e.preventDefault();\r\n    }\r\n\r\n    async confirmUpdate() {\r\n        debugger;\r\n        let value = this.state.newValue.replace(',', '.')\r\n        debugger;\r\n        await axiosService({\r\n            method: 'PUT', url:'/marketProduct/update',\r\n            params:{idMktProduct: this.state.idMktProduct, value: value},\r\n            headers:{authorization: this.state.token}\r\n        }).then((response) => {\r\n            this.setState({load: true});\r\n            this.setState({edit:false});\r\n            this.setState({showMessage: true,\r\n                typeMessage: 'ok', message:'Produto excluído com sucesso!'})\r\n            this.updateStateMessage();\r\n        }).catch((error) => {\r\n            this.setState({load: false});\r\n            this.setState({message: 'falha ao alterar produto.',\r\n            typeMessage: 'error'})\r\n        })\r\n        debugger; \r\n        let products = this.state.mktProducts;\r\n        products.forEach((p) => {\r\n            if(p.idMktProduct === this.state.idMktProduct) {\r\n                p.value = value;\r\n            }\r\n        })\r\n        this.setState({mktProducts : products, newValue:''})\r\n    }\r\n\r\n    rejectUpdate(){\r\n        this.setState({newValue:'', edit:false})\r\n    }\r\n\r\n    formatValueIn(e) {\r\n        moneyMask(e.target.value)\r\n        this.setState({valueInsert: moneyMask(e.target.value)})\r\n    }\r\n\r\n    message(){\r\n        return(\r\n            <MessageLine message={this.state.message} typeMessage={this.state.typeMessage} /> \r\n        );      \r\n    }\r\n\r\n    updateStateMessage() {\r\n        const interval = setInterval(() => {\r\n            this.setState({showMessage: false})\r\n        }, 3000);\r\n        return () => clearInterval(interval);\r\n    }\r\n \r\n\r\n\r\n\r\n    render(){\r\n        return(\r\n            <div id='containerPage'>\r\n\r\n                 <div id='containerBtnGoBackSeparate'>\r\n                    <div  id='btnGoBack' onClick={() => this.props.history.push('/admin')}>voltar</div>\r\n                </div>\r\n\r\n                <div id='titlePage'>Adicionar produtos</div>\r\n                        \r\n                {this.state.showPopup ? <Popup txt={`Deseja excluir o produto?`} btn1='sim' btn2='não'\r\n                                         close={(e)=>this.requestDeleteProduct(null, e)} />:null}\r\n                \r\n                    <form  id='containerInsertProduct'>\r\n                        <div id='containerInternInsertProduct'>\r\n                            <div id='containerSelectProduct'>\r\n                                <label id='labelsOthers'>Produto:</label>\r\n                                <select id='selectOthers' name='productInsert' value={this.state.productInsert} onChange={(e)=>{this.setState({productInsert: e.target.value})}}>\r\n                                    <option id='selectFindOpt' key={0} value=''>Selecione...</option>\r\n                                    {this.state.products.map((p) => {              \r\n                                        return(<option id='selectFindOpt' key={p.id} value={p.id}>{p.product}</option>)\r\n                                    })}\r\n                                </select>\r\n                            </div>\r\n                            <div id='containerInputProduct'>\r\n                                <label id='labelsOthers'>Valor:</label>\r\n                                <input id='inputOthers' type='text' name='value' value={this.state.valueInsert}\r\n                                    placeholder='0,00' onChange={(e) => {this.formatValueIn(e)}}/>\r\n                            </div>\r\n                            <div id='containerBtnProduct'>\r\n                                <button id='btnOthers' onClick={(e) => this.insertProduct(e)}>Inserir</button>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                \r\n\r\n                <div id='titlePage'>Atualizar ou excluir produtos</div>\r\n\r\n                <div id='containerResultFind'>\r\n                    {this.state.showMessage !== false && this.message()}\r\n                    {this.state.load === false ?\r\n                        <MessageLine message={this.state.message} typeMessage={this.state.typeMessage} /> :\r\n\r\n                        <table id='tbFind'>\r\n                            <thead>\r\n                                <tr>\r\n                                    <th id='tbFindTh'>Produto</th>\r\n                                    <th id='tbFindTh'>Valor (R$) /Kg</th>\r\n                                    <th id='tbFindTh'>Última atualização</th>\r\n                                    <th id='tbFindTh'>Ação</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                            {this.state.mktProducts.map((p, index) => { \r\n                                return(\r\n                                <tr id='tbFindTrNoHover' style={{'backgroundColor': (index % 2 === 0) ?  '#F3F6F6' : '#FFF'}} key={p.idMktProduct}>\r\n                                    <td id='tbFindTd'>{p.product}</td>\r\n                                    {this.state.edit === true && this.state.showPopup !== true && this.state.line === index ?\r\n                                        <td id='tbFindTdNotPadding'>         \r\n                                            <div id='inputValueContainer'>\r\n                                                <input id='inputValueTxt' type='text' name='value' value={this.state.newValue}\r\n                                                    placeholder='0,00' onChange={(e) => {this.setNewValue(e)}}/>\r\n                                                <img id='tbIconEditValue' src={require('../../assets/incons/icon-confirm-fill.svg')}\r\n                                                    onClick={()=>{this.confirmUpdate(p.idMktProduct)}} alt='excluir'/>\r\n                                                <img id='tbIconEditValue' src={require('../../assets/incons/icon-delete-fill.svg')}\r\n                                                    onClick={()=>{this.rejectUpdate(p.idMktProduct)}} alt='excluir'/>\r\n                                            </div>\r\n                                        </td>:\r\n                                        <td id='tbFindTd'>{p.value.toFixed(2).replace('.',',')}</td>\r\n                                    }\r\n                                    <td id='tbFindTd'>{p.updateDate}</td>\r\n                                    <td id='tbFindTdBtns'>\r\n                                        <img id='tbIconDuo' src={require('../../assets/incons/icon-delete.svg')}\r\n                                            //  onClick={()=>{this.delete(p.idMktProduct)}} alt='excluir'/>\r\n                                             onClick={()=>this.requestDeleteProduct(p.idMktProduct, null)} alt='excluir'/>\r\n                                        <img id='tbIconDuo' src={require('../../assets/incons/icon-edit.svg')}\r\n                                             onClick={()=>{this.edit(p.idMktProduct, index)}} alt='editar'/>\r\n                                    </td>\r\n                                </tr>\r\n                                ); \r\n                            },)}\r\n                            </tbody>\r\n                        </table>\r\n                    \r\n                    }\r\n                </div>\r\n            </div>\r\n   \r\n        )\r\n    }\r\n}\r\nexport default ProductEdit;"]},"metadata":{},"sourceType":"module"}