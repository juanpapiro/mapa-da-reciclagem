{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\juanpapiro\\\\Documents\\\\wspaceweb\\\\mapa-da-reciclagem\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\juanpapiro\\\\Documents\\\\wspaceweb\\\\mapa-da-reciclagem\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\juanpapiro\\\\Documents\\\\wspaceweb\\\\mapa-da-reciclagem\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\juanpapiro\\\\Documents\\\\wspaceweb\\\\mapa-da-reciclagem\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\juanpapiro\\\\Documents\\\\wspaceweb\\\\mapa-da-reciclagem\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\juanpapiro\\\\Documents\\\\wspaceweb\\\\mapa-da-reciclagem\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\juanpapiro\\\\Documents\\\\wspaceweb\\\\mapa-da-reciclagem\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\juanpapiro\\\\Documents\\\\wspaceweb\\\\mapa-da-reciclagem\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\juanpapiro\\\\Documents\\\\wspaceweb\\\\mapa-da-reciclagem\\\\src\\\\pages\\\\ProductEdit\\\\index.js\";\nimport React, { Component, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport '../../style.css';\nimport './productEdit.css';\nimport { axiosService } from '../../service/axios';\nimport MessageLine from '../../components/MessageLine';\n\nvar ProductEdit = /*#__PURE__*/function (_Component) {\n  _inherits(ProductEdit, _Component);\n\n  function ProductEdit(props) {\n    var _this;\n\n    _classCallCheck(this, ProductEdit);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ProductEdit).call(this));\n    _this.state = {\n      id: '',\n      mktProducts: [],\n      stationNotFound: '',\n      load: '',\n      message: '',\n      typeMessage: '',\n      edit: false,\n      line: '',\n      newValue: '',\n      oldValue: '',\n      idMktProduct: '',\n      token: ''\n    };\n    _this.loadProducts = _this.loadProducts.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.messageRegister = _this.messageRegister.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.delete = _this.delete.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.edit = _this.edit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.setNewValue = _this.setNewValue.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.confirmUpdate = _this.confirmUpdate.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(ProductEdit, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var id = this.props.match.params.id;\n      console.log(id);\n      this.setState({\n        token: localStorage.getItem('token')\n      });\n      this.loadProducts(id);\n    }\n  }, {\n    key: \"loadProducts\",\n    value: function () {\n      var _loadProducts = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(id) {\n        var _this2 = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axiosService({\n                  method: 'GET',\n                  url: '/marketProduct/find',\n                  params: {\n                    stationId: id,\n                    page: 0,\n                    size: 0\n                  }\n                }).then(function (response) {\n                  console.log(response.data.response);\n\n                  _this2.setState({\n                    mktProducts: response.data.response\n                  });\n\n                  _this2.setState({\n                    load: true\n                  });\n                }).catch(function (error) {\n                  _this2.setState({\n                    load: false\n                  });\n\n                  _this2.setState({\n                    message: 'falha ao resgatar produtos.',\n                    typeMessage: 'error'\n                  });\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function loadProducts(_x) {\n        return _loadProducts.apply(this, arguments);\n      }\n\n      return loadProducts;\n    }()\n  }, {\n    key: \"messageRegister\",\n    value: function messageRegister() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        id: \"stationNotFound\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"txtStationNotFound\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 17\n        }\n      }, \"Ops... parece que voc\\xEA ainda n\\xE3o tem um posto de coleta cadastrado, deseja cadastrar agora?\"), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"btnsContainerNotFound\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: \"/cadastrar\",\n        id: \"btnGenericYes\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 62\n        }\n      }, \"Sim\")), /*#__PURE__*/React.createElement(Link, {\n        to: \"/\",\n        id: \"btnGenericNot\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 53\n        }\n      }, \"N\\xE3o\"))));\n    }\n  }, {\n    key: \"delete\",\n    value: function () {\n      var _delete2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(idMktProduct) {\n        var _this3 = this;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                console.log(idMktProduct);\n                _context2.next = 3;\n                return axiosService({\n                  method: 'DELETE',\n                  url: '/marketProduct/delete',\n                  params: {\n                    idMktProduct: idMktProduct\n                  },\n                  headers: {\n                    authorization: this.state.token\n                  }\n                }).then(function (response) {\n                  console.log(response.data.response);\n\n                  _this3.setState({\n                    load: true\n                  });\n                }).catch(function (error) {\n                  _this3.setState({\n                    load: false\n                  });\n\n                  _this3.setState({\n                    message: 'falha ao excluir produtos.',\n                    typeMessage: 'error'\n                  });\n                });\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function _delete(_x2) {\n        return _delete2.apply(this, arguments);\n      }\n\n      return _delete;\n    }()\n  }, {\n    key: \"edit\",\n    value: function edit(idMktProduct, line) {\n      this.setState({\n        edit: true\n      });\n      this.setState({\n        line: line\n      });\n      this.setState({\n        idMktProduct: idMktProduct\n      });\n    }\n  }, {\n    key: \"setNewValue\",\n    value: function setNewValue(e) {\n      this.setState({\n        newValue: e.target.value\n      });\n      e.preventDefault();\n    }\n  }, {\n    key: \"confirmUpdate\",\n    value: function () {\n      var _confirmUpdate = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var _this4 = this;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                console.log(this.state.idMktProduct);\n                console.log(this.state.newValue);\n                _context3.next = 4;\n                return axiosService({\n                  method: 'PUT',\n                  url: '/marketProduct/update',\n                  params: {\n                    idMktProduct: this.state.idMktProduct,\n                    value: this.state.newValue\n                  },\n                  headers: {\n                    authorization: this.state.token\n                  }\n                }).then(function (response) {\n                  console.log(response.data.response);\n\n                  _this4.setState({\n                    load: true\n                  });\n\n                  _this4.setState({\n                    edit: false\n                  });\n                }).catch(function (error) {\n                  _this4.setState({\n                    load: false\n                  });\n\n                  _this4.setState({\n                    message: 'falha ao alterar produto.',\n                    typeMessage: 'error'\n                  });\n                });\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function confirmUpdate() {\n        return _confirmUpdate.apply(this, arguments);\n      }\n\n      return confirmUpdate;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        id: \"containerPage\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"titlePage\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 17\n        }\n      }, \"Atualizar produtos\"), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"containerResultFind\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 21\n        }\n      }, this.state.stationNotFound === true && this.messageRegister()), this.state.load === false ? /*#__PURE__*/React.createElement(MessageLine, {\n        message: this.state.message,\n        typeMessage: this.state.typeMessage,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 25\n        }\n      }) : /*#__PURE__*/React.createElement(\"table\", {\n        id: \"tbFind\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        id: \"tbFindTh\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 37\n        }\n      }, \"Produto\"), /*#__PURE__*/React.createElement(\"th\", {\n        id: \"tbFindTh\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 37\n        }\n      }, \"Valor/Kg\"), /*#__PURE__*/React.createElement(\"th\", {\n        id: \"tbFindTh\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 37\n        }\n      }, \"\\xDAltima atualiza\\xE7\\xE3o\"), /*#__PURE__*/React.createElement(\"th\", {\n        id: \"tbFindTh\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 37\n        }\n      }, \"A\\xE7\\xE3o\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 29\n        }\n      }, this.state.mktProducts.map(function (p, index) {\n        return /*#__PURE__*/React.createElement(\"tr\", {\n          id: \"tbFindTr\",\n          style: {\n            'backgroundColor': index % 2 === 0 ? '#F3F6F6' : '#FFF'\n          },\n          key: p.idMktProduct,\n          __self: _this5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(\"td\", {\n          id: \"tbFindTd\",\n          __self: _this5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 37\n          }\n        }, p.product), _this5.state.edit === true && _this5.state.line === index ? /*#__PURE__*/React.createElement(\"div\", {\n          id: \"inputValueContainer\",\n          __self: _this5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 41\n          }\n        }, /*#__PURE__*/React.createElement(\"input\", {\n          id: \"inputValueTxt\",\n          type: \"text\",\n          name: \"value\",\n          value: _this5.state.newValue,\n          placeholder: \"0,00\",\n          onChange: function onChange(e) {\n            _this5.setNewValue(e);\n          },\n          __self: _this5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 45\n          }\n        }), /*#__PURE__*/React.createElement(\"img\", {\n          id: \"tbIconEditValue\",\n          src: require('../../assets/incons/icon-confirm-fill.svg'),\n          onClick: function onClick() {\n            _this5.confirmUpdate(p.idMktProduct);\n          },\n          alt: \"excluir\",\n          __self: _this5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 45\n          }\n        }), /*#__PURE__*/React.createElement(\"img\", {\n          id: \"tbIconEditValue\",\n          src: require('../../assets/incons/icon-delete-fill.svg'),\n          onClick: function onClick() {\n            _this5.rejectUpdate(p.idMktProduct);\n          },\n          alt: \"excluir\",\n          __self: _this5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 45\n          }\n        })) : /*#__PURE__*/React.createElement(\"td\", {\n          id: \"tbFindTd\",\n          __self: _this5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 41\n          }\n        }, p.value), /*#__PURE__*/React.createElement(\"td\", {\n          id: \"tbFindTd\",\n          __self: _this5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 37\n          }\n        }, p.updateDate), /*#__PURE__*/React.createElement(\"td\", {\n          id: \"tbFindTdBtns\",\n          __self: _this5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 37\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          id: \"tbIconDuo\",\n          src: require('../../assets/incons/icon-delete.svg'),\n          onClick: function onClick() {\n            _this5.delete(p.idMktProduct);\n          },\n          alt: \"excluir\",\n          __self: _this5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 41\n          }\n        }), /*#__PURE__*/React.createElement(\"img\", {\n          id: \"tbIconDuo\",\n          src: require('../../assets/incons/icon-edit.svg'),\n          onClick: function onClick() {\n            _this5.edit(p.idMktProduct, index);\n          },\n          alt: \"editar\",\n          __self: _this5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 41\n          }\n        })));\n      })))));\n    }\n  }]);\n\n  return ProductEdit;\n}(Component);\n\nexport default ProductEdit;","map":{"version":3,"sources":["C:/Users/juanpapiro/Documents/wspaceweb/mapa-da-reciclagem/src/pages/ProductEdit/index.js"],"names":["React","Component","useEffect","Link","axiosService","MessageLine","ProductEdit","props","state","id","mktProducts","stationNotFound","load","message","typeMessage","edit","line","newValue","oldValue","idMktProduct","token","loadProducts","bind","messageRegister","delete","setNewValue","confirmUpdate","match","params","console","log","setState","localStorage","getItem","method","url","stationId","page","size","then","response","data","catch","error","headers","authorization","e","target","value","preventDefault","map","p","index","product","require","rejectUpdate","updateDate"],"mappings":"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","sourcesContent":["import React, {Component, useEffect} from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport '../../style.css';\r\nimport './productEdit.css'\r\nimport { axiosService } from '../../service/axios';\r\nimport MessageLine from '../../components/MessageLine';\r\n\r\n\r\nclass ProductEdit extends Component {\r\n    constructor(props) {\r\n        super();\r\n        this.state = {\r\n            id:'',\r\n            mktProducts:[],\r\n            stationNotFound:'',\r\n            load:'',\r\n            message:'',\r\n            typeMessage:'',\r\n            edit: false,\r\n            line: '',\r\n            newValue: '',\r\n            oldValue:'',\r\n            idMktProduct:'',\r\n            token: '',\r\n        }\r\n\r\n        this.loadProducts = this.loadProducts.bind(this);\r\n        this.messageRegister = this.messageRegister.bind(this);\r\n        this.delete = this.delete.bind(this);\r\n        this.edit = this.edit.bind(this);\r\n        this.setNewValue = this.setNewValue.bind(this);\r\n        this.confirmUpdate = this.confirmUpdate.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { id } = this.props.match.params;\r\n        console.log(id)\r\n        this.setState({token: localStorage.getItem('token')});\r\n        this.loadProducts(id);\r\n    }\r\n\r\n    async loadProducts(id) {\r\n        await axiosService({\r\n            method: 'GET', url:'/marketProduct/find',\r\n            params:{stationId: id, page:0, size:0}\r\n        }).then((response) => {\r\n            console.log(response.data.response)\r\n            this.setState({mktProducts: response.data.response});\r\n            this.setState({load: true});\r\n        }).catch((error) => {\r\n            this.setState({load: false});\r\n            this.setState({message: 'falha ao resgatar produtos.',\r\n            typeMessage: 'error'})\r\n        })\r\n    }\r\n\r\n    messageRegister() {\r\n        return(\r\n            <div id='stationNotFound'>\r\n                <div id='txtStationNotFound'>Ops... parece que você ainda não\r\n                tem um posto de coleta cadastrado, deseja cadastrar agora?</div>\r\n                <div id='btnsContainerNotFound'>\r\n                    <Link to='/cadastrar' id='btnGenericYes'><div>Sim</div></Link>\r\n                    <Link to='/' id='btnGenericNot'><div>Não</div></Link>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    async delete(idMktProduct) {\r\n        console.log(idMktProduct)\r\n        await axiosService({\r\n            method: 'DELETE', url:'/marketProduct/delete',\r\n            params:{idMktProduct: idMktProduct},\r\n            headers:{authorization: this.state.token}\r\n        }).then((response) => {\r\n            console.log(response.data.response)\r\n            this.setState({load: true});\r\n        }).catch((error) => {\r\n            this.setState({load: false});\r\n            this.setState({message: 'falha ao excluir produtos.',\r\n            typeMessage: 'error'})\r\n        })\r\n    }\r\n\r\n    edit(idMktProduct, line){\r\n        this.setState({edit:true})\r\n        this.setState({line:line})\r\n        this.setState({idMktProduct: idMktProduct})\r\n    }\r\n    setNewValue(e) {\r\n        this.setState({newValue:e.target.value})\r\n        e.preventDefault();\r\n    }\r\n    async confirmUpdate() {\r\n        console.log(this.state.idMktProduct);\r\n        console.log(this.state.newValue);\r\n        await axiosService({\r\n            method: 'PUT', url:'/marketProduct/update',\r\n            params:{idMktProduct: this.state.idMktProduct, value: this.state.newValue},\r\n            headers:{authorization: this.state.token}\r\n        }).then((response) => {\r\n            console.log(response.data.response)\r\n            this.setState({load: true});\r\n            this.setState({edit:false});\r\n        }).catch((error) => {\r\n            this.setState({load: false});\r\n            this.setState({message: 'falha ao alterar produto.',\r\n            typeMessage: 'error'})\r\n        })\r\n     \r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div id='containerPage'>\r\n                <div id='titlePage'>Atualizar produtos</div>\r\n                <div id='containerResultFind'>\r\n                    <div>{this.state.stationNotFound === true && this.messageRegister()}</div>\r\n                    {this.state.load === false ?\r\n                        <MessageLine message={this.state.message} typeMessage={this.state.typeMessage} /> :\r\n\r\n                        <table id='tbFind'>\r\n                            <thead>\r\n                                <tr>\r\n                                    <th id='tbFindTh'>Produto</th>\r\n                                    <th id='tbFindTh'>Valor/Kg</th>\r\n                                    <th id='tbFindTh'>Última atualização</th>\r\n                                    <th id='tbFindTh'>Ação</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                            {this.state.mktProducts.map((p, index) => { \r\n                                return(\r\n                                <tr id='tbFindTr' style={{'backgroundColor': (index % 2 === 0) ?  '#F3F6F6' : '#FFF'}} key={p.idMktProduct}>\r\n                                    <td id='tbFindTd'>{p.product}</td>\r\n                                    {this.state.edit===true && this.state.line === index ?            \r\n                                        <div id='inputValueContainer'>\r\n                                            <input id='inputValueTxt' type='text' name='value' value={this.state.newValue}\r\n                                                   placeholder='0,00' onChange={(e) => {this.setNewValue(e)}}/>\r\n                                            <img id='tbIconEditValue' src={require('../../assets/incons/icon-confirm-fill.svg')}\r\n                                                 onClick={()=>{this.confirmUpdate(p.idMktProduct)}} alt='excluir'/>\r\n                                            <img id='tbIconEditValue' src={require('../../assets/incons/icon-delete-fill.svg')}\r\n                                                 onClick={()=>{this.rejectUpdate(p.idMktProduct)}} alt='excluir'/>\r\n                                        </div>:\r\n                                        <td id='tbFindTd'>{p.value}</td>\r\n                                    }\r\n                                    <td id='tbFindTd'>{p.updateDate}</td>\r\n                                    <td id='tbFindTdBtns'>\r\n                                        <img id='tbIconDuo' src={require('../../assets/incons/icon-delete.svg')}\r\n                                             onClick={()=>{this.delete(p.idMktProduct)}} alt='excluir'/>\r\n                                        <img id='tbIconDuo' src={require('../../assets/incons/icon-edit.svg')}\r\n                                             onClick={()=>{this.edit(p.idMktProduct, index)}} alt='editar'/>\r\n                                    </td>\r\n                                </tr>\r\n                                ); \r\n                            },)}\r\n                            </tbody>\r\n                        </table>\r\n                    \r\n                    }\r\n                </div>\r\n            </div>\r\n   \r\n        )\r\n    }\r\n}\r\nexport default ProductEdit;"]},"metadata":{},"sourceType":"module"}